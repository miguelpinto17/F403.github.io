<!doctype html>
<html class="no-js" lang="zxx">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Detalhes do Projeto - Planeta Vivo!</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="manifest" href="site.webmanifest">
    <link rel="shortcut icon" type="image/x-icon" href="assets/img/favicon.ico">

    <!-- CSS here -->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/owl.carousel.min.css">
    <link rel="stylesheet" href="assets/css/slicknav.css">
    <link rel="stylesheet" href="assets/css/flaticon.css">
    <link rel="stylesheet" href="assets/css/progressbar_barfiller.css">
    <link rel="stylesheet" href="assets/css/gijgo.css">
    <link rel="stylesheet" href="assets/css/animate.min.css">
    <link rel="stylesheet" href="assets/css/animated-headline.css">
    <link rel="stylesheet" href="assets/css/magnific-popup.css">
    <link rel="stylesheet" href="assets/css/fontawesome-all.min.css">
    <link rel="stylesheet" href="assets/css/themify-icons.css">
    <link rel="stylesheet" href="assets/css/slick.css">
    <link rel="stylesheet" href="assets/css/nice-select.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <style>
        /* Estilo para a altura fixa do contêiner principal */
        main {
            min-height: 80vh; /* Ajuste a altura conforme necessário */
        }

        /* Estilo para a largura e altura fixas das imagens */
        .project-image img {
            width: 100%;
            height: 300px; /* Altura fixa */
            object-fit: cover; /* Ajusta a imagem para cobrir o contêiner */
            border-radius: 10px;
        }

        .project-details-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-top: 20px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .project-image {
            flex: 1;
            max-width: 400px;
        }
        .project-info {
            flex: 2;
            max-width: 600px;
        }
        .project-title {
            font-size: 2em;
            margin-bottom: 10px;
        }
        .project-description {
            font-size: 1.2em;
            margin-bottom: 10px;
        }
        .project-status,
        .project-date,
        .project-participants,
        .project-duration,
        .project-location,
        .project-volunteers {
            font-size: 1em;
            margin-bottom: 5px;
        }
        @media (max-width: 768px) {
            .project-details-container {
                flex-direction: column;
                text-align: center;
            }
            .project-info {
                max-width: 100%;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-area">
            <div class="main-header">
                <div class="header-bottom header-sticky">
                    <div class="container-fluid">
                        <div class="row align-items-center">
                            <div class="col-xl-2 col-lg-2">
                                <div class="logo">
                                    <a href="index.html"><img src="assets/img/logo/main_logo.png" alt=""></a>
                                </div>
                            </div>
                            <div class="col-xl-10 col-lg-10">
                                <div class="menu-wrapper d-flex align-items-center justify-content-end">
                                    <div class="main-menu d-none d-lg-block">
                                        <nav>
                                            <ul id="navigation">                                                                                          
                                                <li><a href="index.html">Página Inicial</a></li>
                                                <li><a href="about.html">Sobre nós</a></li>
                                                <li><a href="what-do.html">O Que Fazemos</a></li>
                                                <li><a href="projects.html">Projetos</a></li>
                                                <li><a href="blog.html">Blog</a></li>                                                
                                                <li><a href="pagina_doacoes.html">Doações</a></li>                                                
                                            </ul>
                                            
                                        </nav>
                                        
                                    </div>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="mobile_menu d-block d-lg-none"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <main>
        <div id="project-details" class="container mt-5">
            <!-- Project details will be loaded here -->
        </div>
    </main>
    <footer>
        <div class="footer-wrapper">
            <div class="footer-area footer-padding">
                <div class="container">
                    <div class="row justify-content-between">
                        <div class="col-xl-4 col-lg-3 col-md-8 col-sm-8">
                            <div class="single-footer-caption mb-50">
                                <div class="single-footer-caption mb-30">
                                    <div class="footer-logo mb-35">
                                        <a href="index.html"><img src="assets/img/logo/main_logo.png" alt=""></a>
                                    </div>
                                    <div class="footer-tittle">
                                        <div class="footer-pera">
                                            <p>A Mudança no Planeta Começa Hoje!</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-2 col-lg-3 col-md-4 col-sm-4">
                            <div class="single-footer-caption mb-50">
                                <div class="footer-tittle">
                                    <h4>Meio Ambiente</h4>
                                    <ul>
                                        <li><a href="index.html">Página Inicial</a></li>
                                        <li><a href="about.html">Sobre-Nós</a></li>
                                        <li><a href="what-do.html">O Que Fazemos</a></li>
                                        <li><a href="projects.html">Projetos</a></li>
                                        <li><a href="blog.html">Blog</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-3 col-lg-4 col-md-6 col-sm-4">
                            <div class="single-footer-caption mb-50">
                                <div class="footer-tittle">
                                    <h4>Contacte-nos</h4>
                                    <ul>
                                        <li><a href="#">planetavivo@gmail.com</a></li>
                                        <li><a href="#">Guimarães, Portugal</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="footer-bottom-area">
                <div class="container">
                    <div class="footer-border">
                        <div class="row d-flex align-items-center">
                            <div class="col-xl-12">
                                <div class="footer-copy-right text-center">
                                    <p>&copy;<script>document.write(new Date().getFullYear());</script> Todos os direitos reservados | Este modelo é feito com <i class="fa fa-heart" aria-hidden="true"></i> por <a href="https://colorlib.com" target="_blank">Colorlib</a></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- JS here -->
    <script src="assets/js/vendor/modernizr-3.5.0.min.js"></script>
    <script src="assets/js/vendor/jquery-1.12.4.min.js"></script>
    <script src="assets/js/popper.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/jquery.slicknav.min.js"></script>
    <script src="assets/js/owl.carousel.min.js"></script>
    <script src="assets/js/slick.min.js"></script>
    <script src="assets/js/gijgo.min.js"></script>
    <script src="assets/js/wow.min.js"></script>
    <script src="assets/js/animated.headline.js"></script>
    <script src="assets/js/jquery.magnific-popup.js"></script>
    <script src="assets/js/jquery.sticky.js"></script>
    <script src="assets/js/jquery.barfiller.js"></script>
    <script src="assets/js/jquery.counterup.min.js"></script>
    <script src="assets/js/waypoints.min.js"></script>
    <script src="assets/js/jquery.countdown.min.js"></script>
    <script src="assets/js/hover-direction-snake.min.js"></script>
    <script src="assets/js/contact.js"></script>
    <script src="assets/js/jquery.form.js"></script>
    <script src="assets/js/jquery.validate.min.js"></script>
    <script src="assets/js/mail-script.js"></script>
    <script src="assets/js/jquery.ajaxchimp.min.js"></script>
    <script src="assets/js/plugins.js"></script>
    <script src="assets/js/main.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', () => {
    const urlParams = new URLSearchParams(window.location.search);
    const projectId = urlParams.get('id'); // Get project id from URL

    // Retrieve projects and user volunteer data from localStorage
    const projects = JSON.parse(localStorage.getItem('events')) || [];
    let userVolunteerData = JSON.parse(localStorage.getItem('userVolunteerData')) || {};

    // Retrieve current user's email from localStorage
    const currentUserEmail = localStorage.getItem('loggedInUser');

    // Find the project by projectId
    const project = projects[projectId];

    if (project) {
        // Default to zero if volunteers property is missing
        project.volunteers = project.volunteers || 0;

        // Construct the project details HTML
        const projectDetailsElement = `
            <div class="project-details-container">
                <div class="project-image">
                    <img src="${project.image}" alt="${project.name}">
                </div>
                <div class="project-info">
                    <h4 class="project-title">${project.name}</h4>
                    <p class="project-description">${project.description}</p>
                    <p class="project-date"><strong>Data:</strong> ${project.date}</p>
                    <p class="project-participants"><strong>Limite de Participantes:</strong> ${project.participants}</p>
                    <p class="project-duration"><strong>Duração:</strong> ${project.duration} dias</p>
                    <p class="project-location"><strong>Localização:</strong> ${project.location}</p>
                    <p class="project-volunteers"><strong>Voluntários:</strong> ${project.volunteers}</p>
                    <button id="volunteer-button" class="btn btn-primary">Quero me voluntariar!</button>
                    <p id="volunteer-message" style="color:red;display:none;">Já te voluntariaste para este projeto ou o limite de voluntários foi atingido.</p>
                </div>
            </div>
        `;

        // Insert project details HTML into the DOM
        document.getElementById('project-details').innerHTML = projectDetailsElement;

        // Add click event listener to the volunteer button
        const volunteerButton = document.getElementById('volunteer-button');
        volunteerButton.addEventListener('click', () => {
            if (!currentUserEmail) {
                alert('Por favor, faça login para se voluntariar.');
                return;
            }

            // Check if the user has already volunteered for this project
            if (userVolunteerData[currentUserEmail] && userVolunteerData[currentUserEmail].includes(projectId)) {
                // Show volunteer message if user has already volunteered
                document.getElementById('volunteer-message').style.display = 'block';
            } else if (project.volunteers < project.participants) {
                // If volunteers are less than the maximum participants, allow volunteering
                project.volunteers += 1; // Increment volunteers count
                // Initialize userVolunteerData for the current user email
                userVolunteerData[currentUserEmail] = userVolunteerData[currentUserEmail] || [];
                userVolunteerData[currentUserEmail].push(projectId); // Add project to user's volunteered list
                localStorage.setItem('events', JSON.stringify(projects)); // Update projects in localStorage
                localStorage.setItem('userVolunteerData', JSON.stringify(userVolunteerData)); // Update user's volunteer data in localStorage
                alert('Você se voluntariou com sucesso!'); // Show success message
                location.reload(); // Refresh the page to update the volunteers count
            } else {
                // Show volunteer message if project is full
                document.getElementById('volunteer-message').style.display = 'block';
            }
        });
    } else {
        // Show message if project is not found
        document.getElementById('project-details').innerHTML = '<p>Projeto não encontrado.</p>';
    }
});

    </script>
</body>
</html>
